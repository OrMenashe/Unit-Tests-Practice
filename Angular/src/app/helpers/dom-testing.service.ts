import { By } from '@angular/platform-browser';
// @ts-ignore
export var DomEventType;
(function (DomEventType) {
  DomEventType["Input"] = "input";
  DomEventType["Change"] = "change";
  DomEventType["Click"] = "click";
  DomEventType["DblClick"] = "dblclick";
  DomEventType["Select"] = "select";
  DomEventType["Blur"] = "blur";
  DomEventType["Focus"] = "focus";
  DomEventType["KeyDown"] = "keydown";
  DomEventType["KeyPress"] = "keypress";
  DomEventType["KeyUp"] = "keyup";
  DomEventType["MouseMove"] = "mousemove";
  DomEventType["MouseEnter"] = "mouseenter";
  DomEventType["MouseLeave"] = "mouseleave";
  DomEventType["MouseOver"] = "mouseover";
  DomEventType["MouseOut"] = "mouseout";
  DomEventType["MouseDown"] = "mousedown";
  DomEventType["MouseUp"] = "mouseup";
  DomEventType["Load"] = "load";
  DomEventType["LoadStart"] = "loadstart";
  DomEventType["LoadEnd"] = "loadend";
  DomEventType["Invalid"] = "invalid";
  DomEventType["Reset"] = "reset";
  DomEventType["Submit"] = "submit";
  DomEventType["Error"] = "error";
})(DomEventType || (DomEventType = {}));
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZG9tLWV2ZW50LXR5cGUuZW51bS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3BhY2thZ2VzL3Rlc3RpbmcvdW5pdC10ZXN0cy9zcmMvbW9kZWxzL2RvbS1ldmVudC10eXBlLmVudW0udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTSxDQUFOLElBQVksWUF5Qlg7QUF6QkQsV0FBWSxZQUFZO0lBQ3RCLCtCQUFlLENBQUE7SUFDZixpQ0FBaUIsQ0FBQTtJQUNqQiwrQkFBZSxDQUFBO0lBQ2YscUNBQXFCLENBQUE7SUFDckIsaUNBQWlCLENBQUE7SUFDakIsNkJBQWEsQ0FBQTtJQUNiLCtCQUFlLENBQUE7SUFDZixtQ0FBbUIsQ0FBQTtJQUNuQixxQ0FBcUIsQ0FBQTtJQUNyQiwrQkFBZSxDQUFBO0lBQ2YsdUNBQXVCLENBQUE7SUFDdkIseUNBQXlCLENBQUE7SUFDekIseUNBQXlCLENBQUE7SUFDekIsdUNBQXVCLENBQUE7SUFDdkIscUNBQXFCLENBQUE7SUFDckIsdUNBQXVCLENBQUE7SUFDdkIsbUNBQW1CLENBQUE7SUFDbkIsNkJBQWEsQ0FBQTtJQUNiLHVDQUF1QixDQUFBO0lBQ3ZCLG1DQUFtQixDQUFBO0lBQ25CLG1DQUFtQixDQUFBO0lBQ25CLCtCQUFlLENBQUE7SUFDZixpQ0FBaUIsQ0FBQTtJQUNqQiwrQkFBZSxDQUFBO0FBQ2pCLENBQUMsRUF6QlcsWUFBWSxLQUFaLFlBQVksUUF5QnZCIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGVudW0gRG9tRXZlbnRUeXBlIHtcbiAgSW5wdXQgPSAnaW5wdXQnLFxuICBDaGFuZ2UgPSAnY2hhbmdlJyxcbiAgQ2xpY2sgPSAnY2xpY2snLFxuICBEYmxDbGljayA9ICdkYmxjbGljaycsXG4gIFNlbGVjdCA9ICdzZWxlY3QnLFxuICBCbHVyID0gJ2JsdXInLFxuICBGb2N1cyA9ICdmb2N1cycsXG4gIEtleURvd24gPSAna2V5ZG93bicsXG4gIEtleVByZXNzID0gJ2tleXByZXNzJyxcbiAgS2V5VXAgPSAna2V5dXAnLFxuICBNb3VzZU1vdmUgPSAnbW91c2Vtb3ZlJyxcbiAgTW91c2VFbnRlciA9ICdtb3VzZWVudGVyJyxcbiAgTW91c2VMZWF2ZSA9ICdtb3VzZWxlYXZlJyxcbiAgTW91c2VPdmVyID0gJ21vdXNlb3ZlcicsXG4gIE1vdXNlT3V0ID0gJ21vdXNlb3V0JyxcbiAgTW91c2VEb3duID0gJ21vdXNlZG93bicsXG4gIE1vdXNlVXAgPSAnbW91c2V1cCcsXG4gIExvYWQgPSAnbG9hZCcsXG4gIExvYWRTdGFydCA9ICdsb2Fkc3RhcnQnLFxuICBMb2FkRW5kID0gJ2xvYWRlbmQnLFxuICBJbnZhbGlkID0gJ2ludmFsaWQnLFxuICBSZXNldCA9ICdyZXNldCcsXG4gIFN1Ym1pdCA9ICdzdWJtaXQnLFxuICBFcnJvciA9ICdlcnJvcicsXG59XG4iXX0=

export class DomTestingService {
  private fixture: any;
  constructor(fixture: any) {
    this.fixture = fixture;
  }
  getElement(selector:string) {
    return this.fixture.debugElement.nativeElement.querySelector(selector);
  }
  getElements(selector: string) {
    return this.fixture.debugElement.nativeElement.querySelectorAll(selector);
  }
  getDebugElement(selector: string) {
    return this.fixture.debugElement.query(By.css(selector));
  }
  click(selector: string) {
    const element = this.getElement(selector);
    element.click();
    this.fixture.detectChanges();
  }
  setInputValue(selector: string, value: string) {
    const element = this.getElement(selector);
    element.value = value;
    this.dispatchEvent(selector, DomEventType.Input);
  }
  mouseEventByCss(selector: string, mouseEventType: string, mouseEventInit = {}) {
    const element = this.getElement(selector);
    const mouseEvent = new MouseEvent(mouseEventType, {
      bubbles: true,
      clientX: element.getBoundingClientRect().left,
      ...mouseEventInit,
    });
    element.dispatchEvent(mouseEvent);
    this.fixture.detectChanges();
  }
  dispatchEvent(selector: string, eventType: string) {
    this.getElement(selector).dispatchEvent(new Event(eventType));
    this.fixture.detectChanges();
  }
  /**
   * Give an object with the formControlName of the input as a key and the value you want.
   */
  setFormInputs(values: string[]) {
    for (const [key, value] of Object.entries(values)) {
      this.setInputValue(`[formControlName=${key}]`, value);
    }
  }
  /**
   * Give an object with the formControlName of the ng-select as a key and the value you want.
   */
  setFormNgSelects(values: any[]) {
    for (const [key, value] of Object.entries(values)) {
      const ngSelect = this.getDebugElement(`[formControlName="${key}"]`);
      const ngSelectComponent = ngSelect.componentInstance;
      // @ts-ignore
      const valueToSelect = ngSelectComponent.items.find((item) => {
        return item.value === value;
      });
      ngSelectComponent.select(valueToSelect);
    }
  }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZG9tLXRlc3Rpbmcuc2VydmljZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3BhY2thZ2VzL3Rlc3RpbmcvdW5pdC10ZXN0cy9zcmMvc2VydmljZXMvZG9tLXRlc3Rpbmcuc2VydmljZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFFQSxPQUFPLEVBQUUsRUFBRSxFQUFFLE1BQU0sMkJBQTJCLENBQUM7QUFDL0MsT0FBTyxFQUFFLFlBQVksRUFBRSxNQUFNLCtCQUErQixDQUFDO0FBRTdELE1BQU0sT0FBTyxpQkFBaUI7SUFDNUIsWUFBb0IsT0FBNEI7UUFBNUIsWUFBTyxHQUFQLE9BQU8sQ0FBcUI7SUFBRyxDQUFDO0lBRXBELFVBQVUsQ0FBd0IsUUFBZ0I7UUFDaEQsT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDLFlBQVksQ0FBQyxhQUFhLENBQUMsYUFBYSxDQUFDLFFBQVEsQ0FBQyxDQUFDO0lBQ3pFLENBQUM7SUFFRCxXQUFXLENBQXdCLFFBQWdCO1FBQ2pELE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQyxZQUFZLENBQUMsYUFBYSxDQUFDLGdCQUFnQixDQUFDLFFBQVEsQ0FBQyxDQUFDO0lBQzVFLENBQUM7SUFFRCxlQUFlLENBQUMsUUFBZ0I7UUFDOUIsT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDLFlBQVksQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDO0lBQzNELENBQUM7SUFFRCxLQUFLLENBQUMsUUFBZ0I7UUFDcEIsTUFBTSxPQUFPLEdBQUcsSUFBSSxDQUFDLFVBQVUsQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUMxQyxPQUFPLENBQUMsS0FBSyxFQUFFLENBQUM7UUFDaEIsSUFBSSxDQUFDLE9BQU8sQ0FBQyxhQUFhLEVBQUUsQ0FBQztJQUMvQixDQUFDO0lBRUQsYUFBYSxDQUFDLFFBQWdCLEVBQUUsS0FBVTtRQUN4QyxNQUFNLE9BQU8sR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFtQixRQUFRLENBQUMsQ0FBQztRQUM1RCxPQUFPLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQztRQUN0QixJQUFJLENBQUMsYUFBYSxDQUFDLFFBQVEsRUFBRSxZQUFZLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDbkQsQ0FBQztJQUVELGVBQWUsQ0FDYixRQUFnQixFQUNoQixjQUFzQixFQUN0QixpQkFBaUMsRUFBRTtRQUVuQyxNQUFNLE9BQU8sR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1FBQzFDLE1BQU0sVUFBVSxHQUFHLElBQUksVUFBVSxDQUFDLGNBQWMsRUFBRTtZQUNoRCxPQUFPLEVBQUUsSUFBSTtZQUNiLE9BQU8sRUFBRSxPQUFPLENBQUMscUJBQXFCLEVBQUUsQ0FBQyxJQUFJO1lBQzdDLEdBQUcsY0FBYztTQUNsQixDQUFDLENBQUM7UUFDSCxPQUFPLENBQUMsYUFBYSxDQUFDLFVBQVUsQ0FBQyxDQUFDO1FBQ2xDLElBQUksQ0FBQyxPQUFPLENBQUMsYUFBYSxFQUFFLENBQUM7SUFDL0IsQ0FBQztJQUVELGFBQWEsQ0FBQyxRQUFnQixFQUFFLFNBQXVCO1FBQ3JELElBQUksQ0FBQyxVQUFVLENBQUMsUUFBUSxDQUFDLENBQUMsYUFBYSxDQUFDLElBQUksS0FBSyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUM7UUFDOUQsSUFBSSxDQUFDLE9BQU8sQ0FBQyxhQUFhLEVBQUUsQ0FBQztJQUMvQixDQUFDO0lBRUQ7O09BRUc7SUFDSCxhQUFhLENBQUMsTUFBYztRQUMxQixLQUFLLE1BQU0sQ0FBQyxHQUFHLEVBQUUsS0FBSyxDQUFDLElBQUksTUFBTSxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsRUFBRTtZQUNqRCxJQUFJLENBQUMsYUFBYSxDQUFDLG9CQUFvQixHQUFHLEdBQUcsRUFBRSxLQUFLLENBQUMsQ0FBQztTQUN2RDtJQUNILENBQUM7SUFFRDs7T0FFRztJQUNILGdCQUFnQixDQUFDLE1BQWM7UUFDN0IsS0FBSyxNQUFNLENBQUMsR0FBRyxFQUFFLEtBQUssQ0FBQyxJQUFJLE1BQU0sQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLEVBQUU7WUFDakQsTUFBTSxRQUFRLEdBQWlCLElBQUksQ0FBQyxlQUFlLENBQ2pELHFCQUFxQixHQUFHLElBQUksQ0FDN0IsQ0FBQztZQUNGLE1BQU0saUJBQWlCLEdBQUcsUUFBUSxDQUFDLGlCQUFpQixDQUFDO1lBQ3JELE1BQU0sYUFBYSxHQUFHLGlCQUFpQixDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFTLEVBQUUsRUFBRTtnQkFDL0QsT0FBTyxJQUFJLENBQUMsS0FBSyxLQUFLLEtBQUssQ0FBQztZQUM5QixDQUFDLENBQUMsQ0FBQztZQUNILGlCQUFpQixDQUFDLE1BQU0sQ0FBQyxhQUFhLENBQUMsQ0FBQztTQUN6QztJQUNILENBQUM7Q0FDRiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBvbmVudEZpeHR1cmUgfSBmcm9tICdAYW5ndWxhci9jb3JlL3Rlc3RpbmcnO1xuaW1wb3J0IHsgRGVidWdFbGVtZW50IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBCeSB9IGZyb20gJ0Bhbmd1bGFyL3BsYXRmb3JtLWJyb3dzZXInO1xuaW1wb3J0IHsgRG9tRXZlbnRUeXBlIH0gZnJvbSAnLi4vbW9kZWxzL2RvbS1ldmVudC10eXBlLmVudW0nO1xuXG5leHBvcnQgY2xhc3MgRG9tVGVzdGluZ1NlcnZpY2U8VD4ge1xuICBjb25zdHJ1Y3Rvcihwcml2YXRlIGZpeHR1cmU6IENvbXBvbmVudEZpeHR1cmU8VD4pIHt9XG5cbiAgZ2V0RWxlbWVudDxVIGV4dGVuZHMgSFRNTEVsZW1lbnQ+KHNlbGVjdG9yOiBzdHJpbmcpOiBVIHtcbiAgICByZXR1cm4gdGhpcy5maXh0dXJlLmRlYnVnRWxlbWVudC5uYXRpdmVFbGVtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpO1xuICB9XG5cbiAgZ2V0RWxlbWVudHM8VSBleHRlbmRzIEhUTUxFbGVtZW50PihzZWxlY3Rvcjogc3RyaW5nKTogVVtdIHtcbiAgICByZXR1cm4gdGhpcy5maXh0dXJlLmRlYnVnRWxlbWVudC5uYXRpdmVFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpO1xuICB9XG5cbiAgZ2V0RGVidWdFbGVtZW50KHNlbGVjdG9yOiBzdHJpbmcpOiBEZWJ1Z0VsZW1lbnQge1xuICAgIHJldHVybiB0aGlzLmZpeHR1cmUuZGVidWdFbGVtZW50LnF1ZXJ5KEJ5LmNzcyhzZWxlY3RvcikpO1xuICB9XG5cbiAgY2xpY2soc2VsZWN0b3I6IHN0cmluZyk6IHZvaWQge1xuICAgIGNvbnN0IGVsZW1lbnQgPSB0aGlzLmdldEVsZW1lbnQoc2VsZWN0b3IpO1xuICAgIGVsZW1lbnQuY2xpY2soKTtcbiAgICB0aGlzLmZpeHR1cmUuZGV0ZWN0Q2hhbmdlcygpO1xuICB9XG5cbiAgc2V0SW5wdXRWYWx1ZShzZWxlY3Rvcjogc3RyaW5nLCB2YWx1ZTogYW55KTogdm9pZCB7XG4gICAgY29uc3QgZWxlbWVudCA9IHRoaXMuZ2V0RWxlbWVudDxIVE1MSW5wdXRFbGVtZW50PihzZWxlY3Rvcik7XG4gICAgZWxlbWVudC52YWx1ZSA9IHZhbHVlO1xuICAgIHRoaXMuZGlzcGF0Y2hFdmVudChzZWxlY3RvciwgRG9tRXZlbnRUeXBlLklucHV0KTtcbiAgfVxuXG4gIG1vdXNlRXZlbnRCeUNzcyhcbiAgICBzZWxlY3Rvcjogc3RyaW5nLFxuICAgIG1vdXNlRXZlbnRUeXBlOiBzdHJpbmcsXG4gICAgbW91c2VFdmVudEluaXQ6IE1vdXNlRXZlbnRJbml0ID0ge31cbiAgKTogdm9pZCB7XG4gICAgY29uc3QgZWxlbWVudCA9IHRoaXMuZ2V0RWxlbWVudChzZWxlY3Rvcik7XG4gICAgY29uc3QgbW91c2VFdmVudCA9IG5ldyBNb3VzZUV2ZW50KG1vdXNlRXZlbnRUeXBlLCB7XG4gICAgICBidWJibGVzOiB0cnVlLFxuICAgICAgY2xpZW50WDogZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0LFxuICAgICAgLi4ubW91c2VFdmVudEluaXQsXG4gICAgfSk7XG4gICAgZWxlbWVudC5kaXNwYXRjaEV2ZW50KG1vdXNlRXZlbnQpO1xuICAgIHRoaXMuZml4dHVyZS5kZXRlY3RDaGFuZ2VzKCk7XG4gIH1cblxuICBkaXNwYXRjaEV2ZW50KHNlbGVjdG9yOiBzdHJpbmcsIGV2ZW50VHlwZTogRG9tRXZlbnRUeXBlKTogdm9pZCB7XG4gICAgdGhpcy5nZXRFbGVtZW50KHNlbGVjdG9yKS5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudChldmVudFR5cGUpKTtcbiAgICB0aGlzLmZpeHR1cmUuZGV0ZWN0Q2hhbmdlcygpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdpdmUgYW4gb2JqZWN0IHdpdGggdGhlIGZvcm1Db250cm9sTmFtZSBvZiB0aGUgaW5wdXQgYXMgYSBrZXkgYW5kIHRoZSB2YWx1ZSB5b3Ugd2FudC5cbiAgICovXG4gIHNldEZvcm1JbnB1dHModmFsdWVzOiBvYmplY3QpOiB2b2lkIHtcbiAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyh2YWx1ZXMpKSB7XG4gICAgICB0aGlzLnNldElucHV0VmFsdWUoYFtmb3JtQ29udHJvbE5hbWU9JHtrZXl9XWAsIHZhbHVlKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2l2ZSBhbiBvYmplY3Qgd2l0aCB0aGUgZm9ybUNvbnRyb2xOYW1lIG9mIHRoZSBuZy1zZWxlY3QgYXMgYSBrZXkgYW5kIHRoZSB2YWx1ZSB5b3Ugd2FudC5cbiAgICovXG4gIHNldEZvcm1OZ1NlbGVjdHModmFsdWVzOiBvYmplY3QpOiB2b2lkIHtcbiAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyh2YWx1ZXMpKSB7XG4gICAgICBjb25zdCBuZ1NlbGVjdDogRGVidWdFbGVtZW50ID0gdGhpcy5nZXREZWJ1Z0VsZW1lbnQoXG4gICAgICAgIGBbZm9ybUNvbnRyb2xOYW1lPVwiJHtrZXl9XCJdYFxuICAgICAgKTtcbiAgICAgIGNvbnN0IG5nU2VsZWN0Q29tcG9uZW50ID0gbmdTZWxlY3QuY29tcG9uZW50SW5zdGFuY2U7XG4gICAgICBjb25zdCB2YWx1ZVRvU2VsZWN0ID0gbmdTZWxlY3RDb21wb25lbnQuaXRlbXMuZmluZCgoaXRlbTogYW55KSA9PiB7XG4gICAgICAgIHJldHVybiBpdGVtLnZhbHVlID09PSB2YWx1ZTtcbiAgICAgIH0pO1xuICAgICAgbmdTZWxlY3RDb21wb25lbnQuc2VsZWN0KHZhbHVlVG9TZWxlY3QpO1xuICAgIH1cbiAgfVxufVxuIl19
